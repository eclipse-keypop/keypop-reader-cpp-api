<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Keypop Reader C++ API 2.0.0: keypop::reader::selection::CardSelectionManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Keypop Reader C++ API 2.0.0
   </div>
   <div id="projectbrief">Reference Reader API for C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacekeypop.html">keypop</a></li><li class="navelem"><a class="el" href="namespacekeypop_1_1reader.html">reader</a></li><li class="navelem"><a class="el" href="namespacekeypop_1_1reader_1_1selection.html">selection</a></li><li class="navelem"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html">CardSelectionManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">keypop::reader::selection::CardSelectionManager Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_card_selection_manager_8hpp_source.html">CardSelectionManager.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5945bb9e06059af90f597120375d8945"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#a5945bb9e06059af90f597120375d8945">~CardSelectionManager</a> ()=default</td></tr>
<tr class="separator:a5945bb9e06059af90f597120375d8945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98eb472420bedc8b7fb2ce664746aef5"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#a98eb472420bedc8b7fb2ce664746aef5">setMultipleSelectionMode</a> ()=0</td></tr>
<tr class="separator:a98eb472420bedc8b7fb2ce664746aef5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cde97dc7c871f099fe8c87c044edb8e"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#a0cde97dc7c871f099fe8c87c044edb8e">prepareSelection</a> (const std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1cpp_1_1_card_selector_base.html">CardSelectorBase</a> &gt; cardSelector, const std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1selection_1_1spi_1_1_card_selection_extension.html">CardSelectionExtension</a> &gt; cardSelectionExtension)=0</td></tr>
<tr class="separator:a0cde97dc7c871f099fe8c87c044edb8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a806881bc9a88bdb8633692123bc952ac"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#a806881bc9a88bdb8633692123bc952ac">prepareReleaseChannel</a> ()=0</td></tr>
<tr class="separator:a806881bc9a88bdb8633692123bc952ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6a79718c13d05d4ecf5f64f714c06c1"><td class="memItemLeft" align="right" valign="top">virtual const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#ab6a79718c13d05d4ecf5f64f714c06c1">exportCardSelectionScenario</a> () const =0</td></tr>
<tr class="separator:ab6a79718c13d05d4ecf5f64f714c06c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00e2678ef1f1f30b0654dae40d42736a"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#a00e2678ef1f1f30b0654dae40d42736a">importCardSelectionScenario</a> (const std::string &amp;cardSelectionScenario)=0</td></tr>
<tr class="separator:a00e2678ef1f1f30b0654dae40d42736a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a982e99b0b7c8f4196b28c26495a7428e"><td class="memItemLeft" align="right" valign="top">virtual const std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_result.html">CardSelectionResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#a982e99b0b7c8f4196b28c26495a7428e">processCardSelectionScenario</a> (std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1_card_reader.html">CardReader</a> &gt; reader)=0</td></tr>
<tr class="separator:a982e99b0b7c8f4196b28c26495a7428e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54bbfc2de95763f9fa9e3cfc1cafff0f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#a54bbfc2de95763f9fa9e3cfc1cafff0f">scheduleCardSelectionScenario</a> (std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1_observable_card_reader.html">ObservableCardReader</a> &gt; observableCardReader, const <a class="el" href="classkeypop_1_1reader_1_1_observable_card_reader.html#a40b5c32d456c83a71fc406ff8c673f44">ObservableCardReader::NotificationMode</a> notificationMode)=0</td></tr>
<tr class="separator:a54bbfc2de95763f9fa9e3cfc1cafff0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a975e02718a605077397fdaa7e4dd6007"><td class="memItemLeft" align="right" valign="top">virtual const std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_result.html">CardSelectionResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#a975e02718a605077397fdaa7e4dd6007">parseScheduledCardSelectionsResponse</a> (const std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_scheduled_card_selections_response.html">ScheduledCardSelectionsResponse</a> &gt; scheduledCardSelectionsResponse)=0</td></tr>
<tr class="separator:a975e02718a605077397fdaa7e4dd6007"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1450486ab80f7e485562cdb0fd235d8"><td class="memItemLeft" align="right" valign="top">virtual const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#ad1450486ab80f7e485562cdb0fd235d8">exportProcessedCardSelectionScenario</a> () const =0</td></tr>
<tr class="separator:ad1450486ab80f7e485562cdb0fd235d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a506305a79282b6acd7ab529da8ab2dc6"><td class="memItemLeft" align="right" valign="top">virtual const std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_result.html">CardSelectionResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#a506305a79282b6acd7ab529da8ab2dc6">importProcessedCardSelectionScenario</a> (const std::string &amp;processedCardSelectionScenario) const =0</td></tr>
<tr class="separator:a506305a79282b6acd7ab529da8ab2dc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Service dedicated to card selection, based on the preparation of a card selection scenario.</p>
<p >A card selection scenario consists of one or more selection cases based on a CardSelectionExtension.<br  />
 A card selection case targets a specific card. <br  />
 Optionally, additional commands can be defined to be executed after the successful selection of the card. <br  />
</p>
<p >If a card selection case fails, the service will try with the next card selection case defined in the scenario, until there are no further card selection cases available.</p>
<p >If a card selection case succeeds:</p>
<ul>
<li>
By default, the service stops at the first successful card selection. </li>
<li>
If the multiple selection mode is set (disabled by default), the service will execute the next selection. This multiple selection mode force the execution of all card selection cases defined in the scenario. This method can be enabled using the <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#a98eb472420bedc8b7fb2ce664746aef5">CardSelectionManager::setMultipleSelectionMode()</a> method </li>
</ul>
<p >The logical channel established with the card can be left open (default) or closed after card selection (by using the <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#a806881bc9a88bdb8633692123bc952ac">CardSelectionManager::prepareReleaseChannel()</a> method).</p>
<p >This service allows to:</p>
<ul>
<li>
Prepare the card selection scenario. </li>
<li>
Make an explicit selection of a card (when the card is already present). </li>
<li>
Schedule the execution of the selection as soon as a card is presented to an observable reader. </li>
</ul>
<p >An instance of this interface can be obtained via the method <a class="el" href="classkeypop_1_1reader_1_1_reader_api_factory.html#a1efa2812c7d04587f1805971c807bd3c">ReaderApiFactory::createCardSelectionManager()</a>.</p>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="_card_selection_manager_8hpp_source.html#l00073">73</a> of file <a class="el" href="_card_selection_manager_8hpp_source.html">CardSelectionManager.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5945bb9e06059af90f597120375d8945" name="a5945bb9e06059af90f597120375d8945"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5945bb9e06059af90f597120375d8945">&#9670;&nbsp;</a></span>~CardSelectionManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual keypop::reader::selection::CardSelectionManager::~CardSelectionManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Virtual destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab6a79718c13d05d4ecf5f64f714c06c1" name="ab6a79718c13d05d4ecf5f64f714c06c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6a79718c13d05d4ecf5f64f714c06c1">&#9670;&nbsp;</a></span>exportCardSelectionScenario()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual const std::string keypop::reader::selection::CardSelectionManager::exportCardSelectionScenario </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Exports the current prepared card selection scenario to a string in string format.</p>
<p >This string can be imported into the same or another card selection manager via the method <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#a00e2678ef1f1f30b0654dae40d42736a">importCardSelectionScenario(const std::string&amp;)</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>A non-null string. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#a00e2678ef1f1f30b0654dae40d42736a">importCardSelectionScenario(const std::string&amp;)</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

</div>
</div>
<a id="ad1450486ab80f7e485562cdb0fd235d8" name="ad1450486ab80f7e485562cdb0fd235d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1450486ab80f7e485562cdb0fd235d8">&#9670;&nbsp;</a></span>exportProcessedCardSelectionScenario()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual const std::string keypop::reader::selection::CardSelectionManager::exportProcessedCardSelectionScenario </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Exports the content of the previously processed card selection scenario in string format.</p>
<p >This string can be imported into the same or another card selection manager via the method importProcessedCardSelectionScenario(const std::string&amp;).</p>
<p >Prerequisite: the card selection scenario must first have been processed via the processCardSelectionScenario(const std::shared_ptr&lt;CardReader&gt;) or parseScheduledCardSelectionsResponse(const std::shared_ptr&lt;ScheduledCardSelectionsResponse&gt;) method.</p>
<p >Caution: if the local environment does not have the card extensions involved in the selection scenario, then methods <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#a982e99b0b7c8f4196b28c26495a7428e">processCardSelectionScenario(const std::shared_ptr&lt;CardReader&gt;)</a> and parseScheduledCardSelectionsResponse(const std::shared_ptr&lt;ScheduledCardSelectionsResponse&gt;) will not be able to interpret the content of the result, and consequently, the content of the result object <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_result.html">CardSelectionResult</a> will not contain any active selection. It will then be necessary to export the processed scenario in order to import it and interpret it correctly by a card selection manager that has all the card extensions involved in the selection scenario.</p>
<dl class="section return"><dt>Returns</dt><dd>A non-null string. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalStateException</td><td>If the card selection scenario has not yet been processed or has failed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>importProcessedCardSelectionScenario(const std::string&amp;) </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.3.0 </dd></dl>

</div>
</div>
<a id="a00e2678ef1f1f30b0654dae40d42736a" name="a00e2678ef1f1f30b0654dae40d42736a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00e2678ef1f1f30b0654dae40d42736a">&#9670;&nbsp;</a></span>importCardSelectionScenario()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int keypop::reader::selection::CardSelectionManager::importCardSelectionScenario </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cardSelectionScenario</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Imports a card selection scenario provided as a string in string format.</p>
<p >The string must have been exported from a card selection manager via the method <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#ab6a79718c13d05d4ecf5f64f714c06c1">exportCardSelectionScenario()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cardSelectionScenario</td><td>The string containing the exported card selection scenario. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The index of the last imported selection in the card selection scenario. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If the string is null or malformed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#ab6a79718c13d05d4ecf5f64f714c06c1">exportCardSelectionScenario()</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

</div>
</div>
<a id="a506305a79282b6acd7ab529da8ab2dc6" name="a506305a79282b6acd7ab529da8ab2dc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a506305a79282b6acd7ab529da8ab2dc6">&#9670;&nbsp;</a></span>importProcessedCardSelectionScenario()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual const std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_result.html">CardSelectionResult</a> &gt; keypop::reader::selection::CardSelectionManager::importProcessedCardSelectionScenario </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>processedCardSelectionScenario</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Imports a previously exported processed card selection scenario in string format and returns the card selection result.</p>
<p >Prerequisites:</p>
<ul>
<li>
the string must have been exported from a card selection manager via the method <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#ad1450486ab80f7e485562cdb0fd235d8">exportProcessedCardSelectionScenario()</a>, </li>
<li>
the local environment must have the card extensions involved in the card selection scenario, </li>
<li>
the current manager must first be configured with the same card selection scenario as the manager that was used to export the processed card selection scenario. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">processedCardSelectionScenario</td><td>The string containing the exported processed card selection scenario. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A non-null reference. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If the string is null, malformed or contains more card selection cases than the current card selection scenario. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_invalid_card_response_exception.html">InvalidCardResponseException</a></td><td>If the data returned by the card could not be interpreted. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_manager.html#ad1450486ab80f7e485562cdb0fd235d8">exportProcessedCardSelectionScenario()</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.3.0 </dd></dl>

</div>
</div>
<a id="a975e02718a605077397fdaa7e4dd6007" name="a975e02718a605077397fdaa7e4dd6007"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a975e02718a605077397fdaa7e4dd6007">&#9670;&nbsp;</a></span>parseScheduledCardSelectionsResponse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual const std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_result.html">CardSelectionResult</a> &gt; keypop::reader::selection::CardSelectionManager::parseScheduledCardSelectionsResponse </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_scheduled_card_selections_response.html">ScheduledCardSelectionsResponse</a> &gt;&#160;</td>
          <td class="paramname"><em>scheduledCardSelectionsResponse</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Analyzes the responses provided by a calypsonet::terminal::reader::CardReaderEvent following the insertion of a card and the execution of the card selection scenario.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scheduledCardSelectionsResponse</td><td>The card selection scenario execution response. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A non-null reference. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If the provided card selection response is null. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_invalid_card_response_exception.html">InvalidCardResponseException</a></td><td>If the data returned by the card could not be interpreted. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<a id="a806881bc9a88bdb8633692123bc952ac" name="a806881bc9a88bdb8633692123bc952ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a806881bc9a88bdb8633692123bc952ac">&#9670;&nbsp;</a></span>prepareReleaseChannel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void keypop::reader::selection::CardSelectionManager::prepareReleaseChannel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Requests the closing of the physical channel at the end of the execution of the card selection request.</p>
<p >It is thus possible to chain several selections on the same card selection scenario by restarting the card connection sequence.</p>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<a id="a0cde97dc7c871f099fe8c87c044edb8e" name="a0cde97dc7c871f099fe8c87c044edb8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cde97dc7c871f099fe8c87c044edb8e">&#9670;&nbsp;</a></span>prepareSelection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int keypop::reader::selection::CardSelectionManager::prepareSelection </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1cpp_1_1_card_selector_base.html">CardSelectorBase</a> &gt;&#160;</td>
          <td class="paramname"><em>cardSelector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1selection_1_1spi_1_1_card_selection_extension.html">CardSelectionExtension</a> &gt;&#160;</td>
          <td class="paramname"><em>cardSelectionExtension</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Appends a card selection case to the card selection scenario.</p>
<p >The method returns the index giving the current position of the selection in the selection scenario (0 for the first application, 1 for the second, etc.). This index will be used to retrieve the corresponding result in the <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_result.html">CardSelectionResult</a> object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cardSelector</td><td>The card selector containing the filters to be used to select the card. </td></tr>
    <tr><td class="paramname">cardSelectionExtension</td><td>The card selection extension to be used to parse the card selection response. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A non-negative int. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If the provided card selector or card selection extension is null. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>2.0.0 </dd></dl>

</div>
</div>
<a id="a982e99b0b7c8f4196b28c26495a7428e" name="a982e99b0b7c8f4196b28c26495a7428e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a982e99b0b7c8f4196b28c26495a7428e">&#9670;&nbsp;</a></span>processCardSelectionScenario()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual const std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1selection_1_1_card_selection_result.html">CardSelectionResult</a> &gt; keypop::reader::selection::CardSelectionManager::processCardSelectionScenario </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1_card_reader.html">CardReader</a> &gt;&#160;</td>
          <td class="paramname"><em>reader</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Explicitely executes a previously prepared card selection scenario and returns the card selection result.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reader</td><td>The reader to communicate with the card. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A non-null reference. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If the provided reader is null. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1reader_1_1_reader_communication_exception.html">ReaderCommunicationException</a></td><td>If the communication with the reader has failed. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1reader_1_1_card_communication_exception.html">CardCommunicationException</a></td><td>If communication with the card has failed or if the status word check is enabled in the card request and the card has returned an unexpected code. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1reader_1_1selection_1_1_invalid_card_response_exception.html">InvalidCardResponseException</a></td><td>If the card returned invalid data during the selection process. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<a id="a54bbfc2de95763f9fa9e3cfc1cafff0f" name="a54bbfc2de95763f9fa9e3cfc1cafff0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54bbfc2de95763f9fa9e3cfc1cafff0f">&#9670;&nbsp;</a></span>scheduleCardSelectionScenario()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void keypop::reader::selection::CardSelectionManager::scheduleCardSelectionScenario </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classkeypop_1_1reader_1_1_observable_card_reader.html">ObservableCardReader</a> &gt;&#160;</td>
          <td class="paramname"><em>observableCardReader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkeypop_1_1reader_1_1_observable_card_reader.html#a40b5c32d456c83a71fc406ff8c673f44">ObservableCardReader::NotificationMode</a>&#160;</td>
          <td class="paramname"><em>notificationMode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of the prepared card selection scenario as soon as a card is presented to the provided <a class="el" href="classkeypop_1_1reader_1_1_observable_card_reader.html">ObservableCardReader</a>.</p>
<p >calypsonet::terminal::reader::CardReaderEvent are pushed to the observer according to the specified notification mode.</p>
<p >The result of the scenario execution will be analyzed by parseScheduledCardSelectionsResponse(ScheduledCardSelectionsResponse).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">observableCardReader</td><td>The reader with which the card communication is carried out. </td></tr>
    <tr><td class="paramname">notificationMode</td><td>The card notification mode to use when a card is detected. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the parameters is null. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<a id="a98eb472420bedc8b7fb2ce664746aef5" name="a98eb472420bedc8b7fb2ce664746aef5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98eb472420bedc8b7fb2ce664746aef5">&#9670;&nbsp;</a></span>setMultipleSelectionMode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void keypop::reader::selection::CardSelectionManager::setMultipleSelectionMode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Sets the multiple selection mode to process all selection cases even in case of a successful selection.</p>
<p >The multiple selection mode is disabled by default.</p>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/github/workspace/include/keypop/reader/selection/<a class="el" href="_card_selection_manager_8hpp_source.html">CardSelectionManager.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
